<!DOCTYPE html>
<html lang="en" ng-app="app">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gestión de Ventas</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular.min.js"></script>
</head>
<body ng-controller="SalesController">

<div class="container mt-5">
  <h1>Gestión de Ventas</h1>

  <!-- Filtro -->
  <div class="mb-3">
    <input type="text" class="form-control" placeholder="Filtrar por cliente o fecha" ng-model="searchText">
  </div>

  <!-- Botón para mostrar el div de alta -->
  <button class="btn btn-primary mb-3" ng-click="toggleAddForm()">Agregar Venta</button>

  <!-- Div para el formulario de alta -->
  <div ng-show="showAddForm" class="mb-4">
    <h3>Alta de Venta</h3>
    <form>
      <div class="mb-3">
        <label for="client" class="form-label">Cliente</label>
        <input type="text" class="form-control" id="client" ng-model="newSale.client">
      </div>
      <div class="mb-3">
        <label for="date" class="form-label">Fecha de Venta</label>
        <input type="date" class="form-control" id="date" ng-model="newSale.date">
      </div>
      <button type="button" class="btn btn-success" ng-click="addSale()">Guardar</button>
      <button type="button" class="btn btn-secondary" ng-click="toggleAddForm()">Cancelar</button>
    </form>
  </div>

  <!-- Tabla de ventas -->
  <table class="table table-striped">
    <thead>
    <tr>
      <th>Cliente</th>
      <th>Fecha de Venta</th>
      <th>Acciones</th>
    </tr>
    </thead>
    <tbody>
    <tr ng-repeat="sale in sales | filter:searchText">
      <td>{{ sale.client }}</td>
      <td>{{ sale.date | date:'dd/MM/yyyy' }}</td>
      <td>
        <button class="btn btn-warning btn-sm" ng-click="editSale(sale)">Editar</button>
        <button class="btn btn-danger btn-sm" ng-click="deleteSale(sale)">Borrar</button>
      </td>
    </tr>
    </tbody>
  </table>
</div>
<script src="js/ventas.js"></script>
</body>
</html>
